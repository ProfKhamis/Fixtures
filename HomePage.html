<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Efootball Premier Showdown Fixture Generator</title>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3900846271931081"
     crossorigin="anonymous"></script>
  <meta name="google-site-verification" content="rHChEQlQkLZgkDgCu1eowiMNZEfXHrXud74J4kjvwak" />
  <title>Konami Fixtures – Efootball Match Generator</title>
<meta name="description" content="Generate and manage Efootball fixtures with professional tools for leagues, cups, and tournaments. Simple, fast, and fully mobile optimized.">
<meta name="keywords" content="efootball fixtures, football fixture generator, epl fixtures, uefa fixtures, konami football app, pes fixtures, tournament maker">
<meta name="robots" content="index, follow">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="canonical" href="https://konamifixtures.vercel.app/" />
<meta name="description" content="Generate and download Efootball Premier fixtures easily. Create matchdays and download schedules.">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://konamifixtures.vercel.app/">

    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f2f2f2;
        }
        textarea {
            width: 100%;
            height: 200px;
            font-size: 14px;
            margin-bottom: 10px; /* Added some space below textarea */
        }
        button, select {
            margin-top: 10px;
            padding: 10px 15px; /* Adjusted padding for better button appearance */
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
            transition: background-color 0.3s ease;
        }
        button:hover, select:hover{
            background-color: #0056b3;
        }
        button + button { /* Add space between buttons */
            margin-left: 10px;
        }
        select {
            margin-right: 10px;
            background-color: white;
            color: #333;
            border: 1px solid #007bff;
        }
        .matchday {
            margin-top: 30px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        h3 {
            margin-bottom: 10px;
            color: #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            padding: 10px 12px; /* Adjusted padding for better cell spacing */
            border: 1px solid #ddd; /* Lighter border for tables */
            text-align: center;
        }
        th {
            background-color: #e9ecef; /* Slightly darker background for headers */
            font-weight: bold;
        }
        .section-header {
            margin-top: 40px;
            font-size: 28px; /* Slightly larger for prominence */
            color: #0056b3; /* A bit more vibrant color */
            border-bottom: 2px solid #007bff; /* Underline for section headers */
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        #whatsapp-float {
            position: fixed;
            bottom: 80px; /* lifted up from the bottom */
            right: 20px;
            z-index: 1000;
        }

        #whatsapp-float img {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: transform 0.3s ease;
        }

        #whatsapp-float img:hover {
            transform: scale(1.15);
        }
    </style>
</head>
<body>

    <h2>Efootball Fixture Generator</h2>
    <p>Enter your team names (one per line):</p>
    <textarea id="teamInput" placeholder="Enter teams here"></textarea>
    <br>
    <button onclick="generateFixtures()">Generate Fixtures</button>
    <br><br>
    <select id="matchdaySelector">
        <option value="">Select Matchday to Download as PDF</option>
    </select>
    <button onclick="downloadSelectedMatchday()">Download PDF</button>
    <button onclick="shareSelectedMatchday()">Share on WhatsApp</button>

    <div id="output"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        let fixturesText = '';
        let matchdayMap = {};

        window.onload = () => {
            const saved = JSON.parse(localStorage.getItem('savedTeams') || '[]');
            if (saved.length) {
                document.getElementById('teamInput').value = saved.join('\n');
            }
            // Set the current year in the footer
            document.getElementById('year').textContent = new Date().getFullYear();
        };

        function generateFixtures() {
            const input = document.getElementById('teamInput').value.trim();
            const teams = input.split('\n').map(t => t.trim()).filter(Boolean);
            const outputDiv = document.getElementById('output');
            const matchdaySelector = document.getElementById('matchdaySelector');

            // --- Validate for duplicate team names ---
            const uniqueTeams = new Set(teams.map(team => team.toLowerCase())); // Use Set for uniqueness, convert to lowercase for case-insensitivity
            if (uniqueTeams.size !== teams.length) {
                alert('Error: Please ensure all team names are unique. Duplicate team names are not allowed.');
                return; // Stop the function execution
            }
            // --- End validation ---

            outputDiv.innerHTML = '';
            matchdaySelector.innerHTML = '<option value="">Select Matchday to Download as PDF</option>';
            matchdayMap = {};
            fixturesText = ''; // Clear previous fixtures

            // Save teams to local storage
            localStorage.setItem('savedTeams', JSON.stringify(teams));

            // Round-robin algorithm implementation
            const roundRobin = (teams) => {
                const n = teams.length;
                const results = [];
                let teamList = [...teams]; // Create a mutable copy

                // Add a 'BYE' team if the number of teams is odd
                if (n % 2 !== 0) {
                    teamList.push('BYE');
                }

                // Loop for n-1 rounds (each team plays n-1 opponents)
                for (let round = 0; round < teamList.length - 1; round++) {
                    const roundMatches = [];
                    // Pair teams: first with last, second with second-to-last, etc.
                    for (let i = 0; i < teamList.length / 2; i++) {
                        const home = teamList[i];
                        const away = teamList[teamList.length - 1 - i];

                        // Only add matches if neither team is 'BYE'
                        if (home !== 'BYE' && away !== 'BYE') {
                            roundMatches.push([home, away]);
                        }
                    }
                    results.push(roundMatches); // Store matches for the current round

                    // Rotate teams for the next round (fixed first team)
                    const fixed = teamList[0];
                    const rotated = teamList.slice(1); // Get all teams except the first
                    rotated.unshift(rotated.pop()); // Move the last team to the second position
                    teamList = [fixed, ...rotated]; // Reconstruct the team list
                }
                return results;
            };

            // Generate fixtures for the first leg
            const firstLeg = roundRobin(teams);
            // Generate fixtures for the second leg by swapping home/away from first leg
            const secondLeg = firstLeg.map(round =>
                round.map(match => [match[1], match[0]])
            );

            // --- FIRST LEG DISPLAY ---
            let matchday = 1;
            const firstLegHeader = document.createElement('h2');
            firstLegHeader.className = 'section-header';
            firstLegHeader.textContent = '🏆 First Leg Fixtures';
            outputDiv.appendChild(firstLegHeader);

            firstLeg.forEach(round => {
                fixturesText += `--- First Leg - Matchday ${matchday} ---\n`;
                fixturesText += round.map(m => `${m[0]} vs ${m[1]}`).join('\n') + '\n\n';

                // Create HTML elements for display
                const matchdayDiv = document.createElement('div');
                matchdayDiv.className = 'matchday';
                matchdayDiv.innerHTML = `<h3>Matchday ${matchday} Fixtures</h3>
                    <table>
                        <thead><tr><th>Home</th><th>Away</th></tr></thead>
                        <tbody>
                            ${round.map(m => `<tr><td>${m[0]}</td><td>${m[1]}</td></tr>`).join('')}
                        </tbody>
                    </table>`;
                outputDiv.appendChild(matchdayDiv);
                matchdayMap[matchday] = matchdayDiv; // Correctly map the div
                const option = document.createElement('option');
                option.value = matchday;
                option.textContent = `Matchday ${matchday}`;
                matchdaySelector.appendChild(option);
                matchday++;
            });

            // --- SECOND LEG DISPLAY ---
            const secondLegHeader = document.createElement('h2');
            secondLegHeader.className = 'section-header';
            secondLegHeader.textContent = '🏆 Second Leg Fixtures';
            outputDiv.appendChild(secondLegHeader);

            secondLeg.forEach(round => {
                fixturesText += `--- Second Leg - Matchday ${matchday} ---\n`;
                fixturesText += round.map(m => `${m[0]} vs ${m[1]}`).join('\n') + '\n\n';

                // Create HTML elements for display
                const matchdayDiv = document.createElement('div');
                matchdayDiv.className = 'matchday';
                matchdayDiv.innerHTML = `<h3>Matchday ${matchday} Fixtures</h3>
                    <table>
                        <thead><tr><th>Home</th><th>Away</th></tr></thead>
                        <tbody>
                            ${round.map(m => `<tr><td>${m[0]}</td><td>${m[1]}</td></tr>`).join('')}
                        </tbody>
                    </table>`;
                outputDiv.appendChild(matchdayDiv);
                matchdayMap[matchday] = matchdayDiv; // Correctly map the div
                const option = document.createElement('option');
                option.value = matchday;
                option.textContent = `Matchday ${matchday}`;
                matchdaySelector.appendChild(option);

                matchday++;
            });
        }

        async function downloadSelectedMatchday() {
            const matchday = document.getElementById('matchdaySelector').value;
            if (!matchday || !matchdayMap[matchday]) return alert('Select a matchday first.');
            const node = matchdayMap[matchday];

            const canvas = await html2canvas(node);
            const imgData = canvas.toDataURL('image/png');
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF();
            const imgProps = pdf.getImageProperties(imgData);
            const pdfWidth = pdf.internal.pageSize.getWidth();
            const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
            pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
            pdf.save(`Matchday_${matchday}.pdf`);
        }

        async function shareSelectedMatchday() {
            const matchday = document.getElementById('matchdaySelector').value;
            if (!matchday || !matchdayMap[matchday]) return alert('Select a matchday first.');
            const node = matchdayMap[matchday];

            const canvas = await html2canvas(node);
            canvas.toBlob(blob => {
                const file = new File([blob], `Matchday_${matchday}.png`, { type: 'image/png' });
                if (navigator.canShare && navigator.canShare({ files: [file] })) {
                    navigator.share({
                        files: [file],
                        title: `Matchday ${matchday} Fixtures`,
                        text: `Here is Matchday ${matchday} fixture from Konami Fixtures ⚽`
                    }).catch(console.error);
                } else {
                    alert("Your browser doesn't support image sharing. Try Chrome on Android.");
                }
            });
        }
    </script>
    <a href="https://wa.me/254758819349" target="_blank" id="whatsapp-float" title="Chat on WhatsApp">
        <img src="https://img.icons8.com/color/48/000000/whatsapp--v1.png" alt="WhatsApp" />
          <span class="whatsapp-label">Contact Admin</span>
    </a>
    <footer style="text-align: center; font-size: 14px; color: #666; padding: 20px 0;">
        <hr style="margin-bottom: 10px;">
        <p>&copy; <span id="year"></span> All rights reserved. Made with ❤️ by ProfKhamis.</p>
    </footer>
</body>
</html>
